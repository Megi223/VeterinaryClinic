@model IEnumerable<VeterinaryClinic.Web.ViewModels.Notifications.NotificationViewModel>
@{
    this.ViewData["Title"] = "My Notifications";
}

<br />
<h1 style="text-align:center"><b>@this.ViewData["Title"]</b></h1>
@if (Model.Count() == 0)
{
    <h3 style="text-align:center">No new notifications</h3>
}
else
{
   
    <hr />
    @foreach (var notification in Model)
    {
        <div class="alert alert-primary alert-dismissible" role="alert">
            <p id="notificationContent"></p>
            <form asp-area="" asp-controller="Notifications" asp-action="Delete" asp-route-id="@notification.Id">
                <input type="submit" value="Remove" class="btn btn-danger float-right" />
                <div class="clearfix"></div>
            </form>
        </div>
        <br />
    }
}


@section Scripts{
    <script src="~/lib/signalr/dist/browser/signalr.min.js"></script>
    <script>
        var connection =
            new signalR.HubConnectionBuilder()
                .withUrl("/notifications")
                .build();

        connection.on("SendNotification", function (notification) {
            // $('#notificationContent').append(notification.content);
            console.log(notification.content);
        });

        //connection.invoke("SendNotification", message);

        
        /*$("#button").click(function () {
            console.log(1);
        });*/
        connection.start();
    </script>

}